<?php

namespace Sources\GettyBundle\Tests\Controller;

use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;

class DefaultControllerTest extends WebTestCase
{

	public function testBidon() { $this -> assertTrue(true);}

	public function testJson()
	{
		$client = static::createClient();
		$crawler = $client->request('GET', '/en/getty/json/analyse/all/2');

		$reponse = $client -> getResponse() -> getContent();
		$expected = '{"noeuds":[{"id":"0","type":"Term","nom":"analysis and testing techniques","description":"Techniques having to do with analysis and testing."},{"id":"1","type":"Concept","nom":"processes and techniques by specific type"},{"id":"2","type":"Concept","nom":"processes and techniques (processes and techniques)"},{"id":"3","type":"Term","nom":"Processes and Techniques (Hierarchy Name)","description":"The Processes and Techniques hierarchy contains descriptors for actions and methods performed physically on or with materials and objects, and for processes occurring in materials and objects. Included are types of process or technique pertaining to the production and handling of objects or images (e.g., assembling) or of substances (e.g., mixing) or relevant to the manipulation and processing of specific materials (e.g., soldering). Also included are descriptors for processes that occur in substances, artifacts, or other objects, sometimes initiated intentionally and sometimes occurring spontaneously (e.g., burning).Relation to Other Hierarchies: Descriptors for organizational, administrative, or intellectual activities conducted to accomplish specific purposes (e.g., analysis), including descriptors relating to the collecting of objects and various other professional activities (e.g., collections management), are found in the Functions hierarchy. Descriptors that designate branches of learning (e.g., anthropology) are found in the Disciplines hierarchy, while the processes and techniques associated with these fields are contained here. Descriptors for physical and mental actions not performed to manipulate materials or fabricate objects (e.g.g., running, meditation) are placed in the Physical and Mental Activities hierarchy. Certain descriptors that refer to degenerative forces on materials or structures (e.g., stress) are found in the Associated Concepts hierarchy. Descriptors for certain effects caused by processes occurring in materials and objects (e.g., cracks) appear in the Conditions and Effects hierarchy. "},{"id":"4","type":"Term","nom":"Activities Facet","description":"The Activities facet encompasses areas of endeavor, physical and mental actions, discrete occurrences, systematic sequences of actions, methods employed toward a certain end, and processes occurring in materials or objects. Activities covered here range from branches of learning and professional fields to specific life events, from mentally executed tasks to processes performed on or with materials and objects, from single physical actions to complex games."},{"id":"5","type":"Term","nom":"microwear analysis","description":"Analysis employing microscopic techniques to determine how a tool was used and what materials were worked on by examining its wear."},{"id":"6","type":"Term","nom":"use-wear analysis","description":"Analysis to determine how a tool was used and what materials were worked on by examining its wear."},{"id":"18","type":"Term","nom":"analysis","description":"Examining an object, action, material, or concept in detail by separating it into its fundamental elements or component parts, reducing something complex into its various simple elements. It is the opposite process to \"synthesis.\""},{"id":"19","type":"Term","nom":"analytical functions","description":"General functions related to analysis. "},{"id":"20","type":"Concept","nom":"functions by general context"},{"id":"21","type":"Term","nom":"functions (activities)","description":"Areas of responsibility in which activities are conducted in order to accomplish a purpose."},{"id":"22","type":"Term","nom":"Functions (Facet)","description":"The Functions hierarchy contains descriptors for activities that are conducted in order to accomplish specific purposes, as well as methodologies associated with specific areas of endeavor. It includes descriptors for activities relating to the manipulation of data, the collecting of objects, human communication, economics, business, law, and government, as well as other professional activities.Relation to Other Hierarchies: Descriptors describing branches of learning, (e.g., history) and areas of specialization, (e.g., law), are found in the Disciplines hierarchy. Descriptors for operations and processes performed on or with objects and materials (e.g., polishing), are found in the Processes and Techniques hierarchy. Descriptors denoting occasions and happenings of a social, cultural, religious, or personal nature, (e.g., exhibitions), are found in the Events hierarchy. "},{"id":"24","type":"Term","nom":"chemical analysis","description":"Analysis of the chemical composition of a material."},{"id":"30","type":"Term","nom":"dynamic analysis","description":"Analysis under dynamic conditions."},{"id":"36","type":"Term","nom":"thermal analysis","description":"Methods of analysis that characterize material by examining how it responds to heat."},{"id":"42","type":"Term","nom":"quantitative analysis","description":"Chemical analysis aimed at determining the proportions of the substances present in a sample of a material."},{"id":"49","type":"Term","nom":"qualitative analysis","description":"Chemical analysis aimed at examining the nature of a material\'s chemical constituents."},{"id":"56","type":"Term","nom":"differential thermal analysis","description":"A technique for observing the temperature, direction, and magnitude of thermally induced transitions in a material by heating or cooling a sample and comparing its temperature with that of an inert reference material under similar conditions."},{"id":"63","type":"Term","nom":"spatial analysis","description":"Statistical technique in which the spatial locations, distributions, and relations of designated factors are analyzed."},{"id":"69","type":"Term","nom":"risk assessment","description":"Analyzing the potential loss, failure, injury, or other damage involved in or resulting from any activity or project."},{"id":"70","type":"Term","nom":"risk management","description":"Planning how to conduct affairs by assessing, minimizing, and preventing potential losses, injuries, or other damages."}],"relations":["childOf"],"graphe":[{"noeud":"0","childOf":["1"]},{"noeud":"5","childOf":["6"]},{"noeud":"6","childOf":["0"]},{"noeud":"18","childOf":["19"]},{"noeud":"24","childOf":["0"]},{"noeud":"30","childOf":["0"]},{"noeud":"36","childOf":["0"]},{"noeud":"42","childOf":["24"]},{"noeud":"49","childOf":["24"]},{"noeud":"56","childOf":["36"]},{"noeud":"63","childOf":["0"]},{"noeud":"69","childOf":["70"]}]}';

		$expected = str_replace('\n','',$expected);
		$expected = str_replace('  ',' ',$expected);

		$reponse = str_replace('\n','',$reponse);
		$reponse = str_replace('  ',' ',$reponse);

		$this -> assertEquals($expected,$reponse,'génération json incorrecte');
	}
}
